<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>EasyScorekeeper - List sample</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="js/underscore-min.js"></script>
  <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>

  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #EEE;
    }

    #container {
      position: relative;
      margin: 0 auto 0 auto;
      width: 320px;
      background-color: #FFF;
    }

    .dummy_ad {
      width: 320px;
      height: 50px;
      background-color: blue;
    }

    h1 {
      font-size: 1.5em;
      text-align: center;
    }
  </style>

  <script type="text/javascript">
  $(document).ready(function(){

    var API_URL = '../api.php';

    $.ajax({
      url: API_URL,
      dataType: 'jsonp',
      jsonp: 'c',
      data: {
        m: 'list'
      }
    }).done(function(responseData){
      var rankingData = responseData.data;
      console.log(rankingData);
      _.each(rankingData, function(ranker, idx){
        var view = createRankingRowView(
          idx + 1,
          ranker.score,
          ranker.username,
          ranker.comment//,
        );
        $('#ranking').append(view);
      });
    });

    function createRankingRowView(order, score, username, comment){

      var tr = $('<tr>')
        .css({
          height: 24,
          fontSize: 12,
          textAlign: 'center'//,
        })
      ;

      var rank = $('<td>')
        .css({
          width: '10%',
          valign: 'center'
        })
        .text(order)
      ;

      var score = $('<td>')
        .css({
          width: '25%',
          valign: 'center'
        })
        .text(score)
      ;

      var username = $('<td>')
        .css({
          width: '25%',
          valign: 'center'
        })
        .text(username)
      ;

      var comment = $('<td>')
        .css({
          width: '40%',
          lineHeight: '12px',
          fontSize: 10,
          textAlign: 'left'
        })
        .text(comment)
      ;

      return tr.append(rank).append(score).append(username).append(comment);
    }

  });
  </script>
</head>

<body>
  <div id="container">
    <div class="dummy_ad"></div>
    <h1>Ranking</h1>
    <table id="ranking"></table>
  </div>
</body>
</html>
